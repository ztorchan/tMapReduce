syntax = "proto3";

package mapreduce;

option cc_generic_services = true;

message ReplyMsg {
  bool ok = 1;
  string msg = 2;
}

message RegisterInfo {
  string address = 1;
}

message Job {
  message KV {
    string key = 1;
    string value = 2;
  }
  string name = 1;
  string type = 2;
  uint32 mapper_num = 3;
  uint32 reducer_num = 4;
  repeated KV kvs = 5;
}

message RegisterReply {
  ReplyMsg reply = 1;
  uint32 worker_id = 2;
}

message LaunchReply {
  ReplyMsg reply = 1;
  uint32 job_id = 2;
}

service MasterService {
  rpc Register(RegisterInfo) returns (RegisterReply) {}
  rpc Launch(Job) returns (LaunchReply) {}
}